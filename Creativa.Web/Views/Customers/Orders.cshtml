@model IEnumerable<Creativa.Web.NorthwindServiceRef.OrderDTO>

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "Orders";
}

<h2 class="mb-4">Orders for Customer @ViewBag.CustomerID</h2>

<div id="ordersGrid"></div>

<p class="mt-3">
    <a href="@Url.Action("Index")" class="btn btn-secondary">&laquo; Back to Customers</a>
</p>

@section Scripts {
    <script>
        $(document).ready(function () {
            $("#ordersGrid").kendoGrid({
                dataSource: {
                    data: @Html.Raw(Json.Encode(Model)),
                    pageSize: 10
                },
                pageable: true,
                height: 400,
                columns: [
                    { field: "OrderID", title: "Order ID", width: "100px" },
                    { field: "OrderDate", title: "Order Date", width: "150px", template: "#= kendo.toString(kendo.parseDate(OrderDate), 'yyyy-MM-dd') #" },
                    { field: "ShippedDate", title: "Shipped Date", width: "150px", template: "#= ShippedDate ? kendo.toString(kendo.parseDate(ShippedDate), 'yyyy-MM-dd') : '' #" }
                ]
            });
        });
    </script>
}
